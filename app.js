jsonObject = {
  "id": 3,
  "name": "Peter Buell",
  "children": [
    {
      "id": 4,
      "name": "Chris Wielinski",
      "children": [
        {
          "id": 21,
          "name": "Steven Priddy"
        },
        {
          "id": 22,
          "name": "Jonathan Thayer"
        },
        {
          "id": 23,
          "name": "Mollye Bell"
        },
        {
          "id": 24,
          "name": "Terry Buell"
        },
        {
          "id": 25,
          "name": "Les Leonard"
        },
        {
          "id": 26,
          "name": "Christopher Surran"
        },
        {
          "id": 27,
          "name": "Jenny Garden"
        },
        {
          "id": 28,
          "name": "Darren Hayes"
        },
        {
          "id": 30,
          "name": "Mike Davis"
        },
        {
          "id": 31,
          "name": "Dee Greve"
        }
      ]
    }
    ,{
      "id": 7,
      "name": "Kyle Gribble",
      "children": [
        {
          "id": 32,
          "name": "Tom Wunderlick"
        },
        {
          "id": 33,
          "name": "John Summers"
        },
        {
          "id": 34,
          "name": "Steven Neuhoff"
        },
        {
          "id": 35,
          "name": "Rusty Miller"
        },
        {
          "id": 36,
          "name": "Rick Paulk"
        },
        {
          "id": 37,
          "name": "Ann O'connor"
        },
        {
          "id": 38,
          "name": "Marc Eller"
        },
        {
          "id": 39,
          "name": "Joseph Lynch"
        },
        {
          "id": 40,
          "name": "Kaylie Summers"
        },
        {
          "id": 41,
          "name": "Tony Dewar"
        }
      ]
    }
    ,{
      "id": 8,
      "name": "Scott Schneider",
      "children": [
        {
          "id": 42,
          "name": "Anthony Sherman"
        },
        {
          "id": 43,
          "name": "PBC Inc."
        },
        {
          "id": 44,
          "name": "Walt Miller"
        },
        {
          "id": 45,
          "name": "Leslie Caffey"
        },
        {
          "id": 48,
          "name": "Michael Edwin Crossley Jr."
        },
        {
          "id": 49,
          "name": "Kim Folse"
        },
        {
          "id": 51,
          "name": "Charles Gale"
        },
        {
          "id": 55,
          "name": "Michael Murray"
        },
        {
          "id": 56,
          "name": "Lee Belland"
        },
        {
          "id": 57,
          "name": "Alissa Stillman"
        }
      ]
    }
    ,{
      "id": 12,
      "name": "Jason Fondren",
      "children": [
        {
          "id": 60,
          "name": "Mary Marron"
        },
        {
          "id": 61,
          "name": "Ann Buell"
        },
        {
          "id": 62,
          "name": "Win Bell"
        },
        {
          "id": 64,
          "name": "Preston Berry"
        },
        {
          "id": 65,
          "name": "Chris Bracken"
        },
        {
          "id": 67,
          "name": "Kelly Parker"
        },
        {
          "id": 68,
          "name": "Art Allen"
        },
        {
          "id": 69,
          "name": "Michael Caddell"
        },
        {
          "id": 70,
          "name": "Suzanne Bowden"
        },
        {
          "id": 71,
          "name": "Anne Payne"
        }
      ]
    }
    ,{
      "id": 13,
      "name": "Beth Buell",
      "children": [
        {
          "id": 73,
          "name": "Karen Carney"
        },
        {
          "id": 74,
          "name": "Bob Buell"
        },
        {
          "id": 75,
          "name": "James Walkup"
        },
        {
          "id": 76,
          "name": "Anna Lyons"
        },
        {
          "id": 78,
          "name": "Chris Dobbs"
        },
        {
          "id": 81,
          "name": "Romaine Spinella"
        },
        {
          "id": 82,
          "name": "Terry Smith"
        },
        {
          "id": 83,
          "name": "Brian Fisher"
        },
        {
          "id": 84,
          "name": "Chipman Seale"
        },
        {
          "id": 86,
          "name": "Paul Buckley"
        }
      ]
    }
    ,{
      "id": 14,
      "name": "Todd Weber",
      "children": [
        {
          "id": 87,
          "name": "Blair Crossley"
        },
        {
          "id": 88,
          "name": "Frank Guidone"
        },
        {
          "id": 90,
          "name": "Jeff Smith"
        },
        {
          "id": 92,
          "name": "Halli Hockenjos"
        },
        {
          "id": 93,
          "name": "Suzanne Eubanks"
        },
        {
          "id": 94,
          "name": "Peter Flanders"
        },
        {
          "id": 95,
          "name": "Ryan Hughes"
        },
        {
          "id": 96,
          "name": "Sharla Myers"
        },
        {
          "id": 97,
          "name": "William Collins"
        },
        {
          "id": 98,
          "name": "Thomas Spaniel"
        }
      ]
    }
    ,{
      "id": 16,
      "name": "Edward Quinlan",
      "children": [
        {
          "id": 99,
          "name": "James Schmidt"
        },
        {
          "id": 102,
          "name": "Jeff Coker"
        },
        {
          "id": 103,
          "name": "Patrick Deen"
        },
        {
          "id": 104,
          "name": "Kristin Ciccarelli"
        },
        {
          "id": 105,
          "name": "Kurt Rodegast"
        },
        {
          "id": 106,
          "name": "Kerry Maguire"
        },
        {
          "id": 107,
          "name": "Tim Robinson"
        },
        {
          "id": 108,
          "name": "William Payne"
        },
        {
          "id": 109,
          "name": "Sam Viviano"
        },
        {
          "id": 110,
          "name": "Scott Wetzel"
        }
      ]
    }
    ,{
      "id": 17,
      "name": "Angie Lomeli",
      "children": [
        {
          "id": 112,
          "name": "Scott Smith"
        },
        {
          "id": 113,
          "name": "Danny Kearns"
        },
        {
          "id": 114,
          "name": "Pete Northway"
        },
        {
          "id": 116,
          "name": "Jerry Eden"
        },
        {
          "id": 117,
          "name": "Robert Black"
        },
        {
          "id": 118,
          "name": "Natalie Bedford"
        },
        {
          "id": 119,
          "name": "Tracy Castleman"
        },
        {
          "id": 120,
          "name": "Tracy Castleman"
        },
        {
          "id": 121,
          "name": "Rosa Lomeli"
        },
        {
          "id": 122,
          "name": "Michelle Wood"
        }
      ]
    }
    ,{
      "id": 19,
      "name": "Jerry Freeman",
      "children": [
        {
          "id": 123,
          "name": "Rory Sanders"
        },
        {
          "id": 124,
          "name": "Deborah Mcmurray"
        },
        {
          "id": 126,
          "name": "Raymond Maltese"
        },
        {
          "id": 127,
          "name": "Kerry Introligator"
        },
        {
          "id": 130,
          "name": "Jonathan Crane"
        },
        {
          "id": 131,
          "name": "Paula Reichenstein"
        },
        {
          "id": 132,
          "name": "Rick Obrien"
        },
        {
          "id": 133,
          "name": "Stephanie McCormick"
        },
        {
          "id": 134,
          "name": "John Young"
        },
        {
          "id": 135,
          "name": "Michelle Cook"
        }
      ]
    }
    ,{
      "id": 20,
      "name": "Michael Rilley",
      "children": [
        {
          "id": 136,
          "name": "Kevin Quinlan"
        },
        {
          "id": 137,
          "name": "Cynthia Brown"
        },
        {
          "id": 138,
          "name": "Tom Paredes"
        }
        ,
        {
          "id": 139,
          "name": "Connie Criswell"
        },
        {
          "id": 140,
          "name": "Sydney Puddicombe"
        },
        {
          "id": 141,
          "name": "Richard Payne"
        },
        {
          "id": 142,
          "name": "David Ramsey"
        },
        {
          "id": 143,
          "name": "David Pearson"
        },
        {
          "id": 144,
          "name": "Wimberly Tribble"
        },
        {
          "id": 145,
          "name": "Nam Nguyen"
        }
      ]
    }
  ]
}

var canvas, stage, tree_container, branch_container, leaf_container,text_container;
var firstNodeName, sky, ground, leaf;


function init() {

  manifest = [
    {src: "./art/mdleafsgrp.png", id: "mdLeafGrp"},
    {src: "./art/smleafred.png", id: "smLeafRed"},
    {src: "./art/smleafgrn.png", id: "smLeafGrn"},
    {src: "./art/smleaforg.png", id: "smLeafOrg"},
    {src: "./art/smleafylw.png", id: "smLeafYlw"},
    {src: "./art/treebark.png", id: "treebark"},
    {src: "./art/boulder-drawing-bush-6.png", id: "treebush"},
    {src: "./art/sky.png", id: "sky"},
    {src: "./art/ground.png", id: "ground"},
  ];



  loader = new createjs.LoadQueue(false);
  loader.addEventListener("complete", loadtree);
  loader.loadManifest(manifest, true, "./art");

     
  loadtree();
  

};



function loadtree(){

  const canvas = document.querySelector('canvas');

  canvas.width = window.innerWidth * .6;
  canvas.height = window.innerHeight*.9;

  console.log('canvas width equals ' + canvas.width)


  var stage     = new createjs.Stage("demoCanvas");
  var tree_container = new createjs.Container();
  var branch_container = new createjs.Container();
  var leaf_container = new createjs.Container();
  var text_container = new createjs.Container();
  
  firstNodeName = jsonObject.name;
  firstNodeId   = jsonObject.id;
  var first_lvl_Branches;

//tree shrubery

  // tree = new createjs.Bitmap(loader.getResult("treebush"));
  // tree.x = 0;
  // tree.y = 0;

  // stage.addChild(tree);
  // stage.update();
  

              //if there is a name in the first spot, create a stump for the tree which represents account holder.
              if(firstNodeName){
                  var stump = new createjs.Shape();

                  stumpX = canvas.width/2 - 20;
                  stumpY = canvas.height-canvas.height*.3;
                  stumpW = canvas.width/2*.05;
                  stumpH = canvas.height*.28;

                  stump.graphics.beginBitmapFill(loader.getResult("treebark")).drawRect(stumpX ,stumpY, stumpW, stumpH);

                  stage.addChild(stump);
 
              };
   
              // D = length of json object
              let D = jsonObject.children.length;

              var Degrees = 90-(D-1) * 10;

              // For each child object, create a new sqaure and draw it on the canvas
              jsonObject.children.forEach(function(child, index) {
                  x = canvas.width/2 -4.5;
                  y = stumpH*2.6;
                  d = canvas.width/2*.3;
                  var name = child.name;

                  function degrees_to_radians(degrees){
                    var pi = Math.PI;
                    return degrees*(pi/180);
                  }

                  x2 = x+(d*Math.cos(degrees_to_radians(360 - Degrees)));
                  y2 = y+(d*Math.sin(degrees_to_radians(360 - Degrees)));

                  var stroke = 8;
                  var color = "brown";

                  var first_lvl_Branches = new createjs.Shape();


                  

                  first_lvl_Branches.graphics.clear()
                  .beginBitmapStroke(loader.getResult("treebark"))
                  .setStrokeStyle(stroke, 'butt', 'bevel')
                  .bezierCurveTo(x, y, x, y+25, x2+12, y2+11);

                      // first_lvl_Branches.graphics.clear().setStrokeStyle(stroke, 'round', 'round').beginStroke(color).moveTo(x+9, y).bezierCurveTo(x+9, y, x, y+25, x2+12, y2+11);
                      branch_container.addChild(first_lvl_Branches);


                    Degrees += 19.8;

              });   


              tree_container.addChild(branch_container, leaf_container); //text_container
              stage.addChild(tree_container);
              createjs.Ticker.setFPS(60);
              createjs.Ticker.addEventListener("tick", stage);

              var zz = canvas.height-canvas.height+ -25 * -1;
              createjs.Tween.get(stump)
                .to({y: 1000},0)
                .to({y: zz}, 3000);
                // .to({y: 1}, 3000);

                createjs.Tween.get(branch_container)
                .to({scaleX: 0, alpha:0},0)

                .to({scaleX: 0.1, alpha:0 },2000)

                .to({scaleX: 0.3, alpha:0},3000)
  
                .to({scaleX: 0.7, alpha:0},4000)
  
                .to({scaleX: 1, alpha:1},6000)


            
};  